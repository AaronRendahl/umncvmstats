---
title: "Multiple Tests"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Multiple Tests}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}
#| message: false
library(conflicted)
library(tidyverse)
library(patchwork)
library(umncvmstats)
conflicts_prefer(dplyr::filter, dplyr::lag, dplyr::select, umncvmstats::as_gt)
```

## Multiple tests

In the one and two-sample tests (ie, when you're not fitting a model), you can use `+` to specify
that the test should be done on several variables. 

```{r}
one_t_test(wt + mpg ~ am + vs, data = mtcars2)
two_t_test(wt + mpg ~ am + vs, data = mtcars2)
```

You can also use `|` to split the data set into groups before running the tests.

```{r}
one_t_test(wt + mpg ~ am | cyl, data = mtcars2)
two_t_test(wt + mpg ~ am | cyl, data = mtcars2)
```

## Combining output

You can use `combine_tests` to combine output from several tests together. 
It'll do it's best to output this meaningfully, but it's up to you to combine
meaningful things together.

```{r}
combine_tests(
  one_t_test(wt ~ am|vs, data = mtcars2),
  two_t_test(wt ~ am, data = mtcars2),
  correlation_test(mpg ~ wt + hp, data=mtcars2),
  one_proportion_test(vs ~ am|cyl, data=mtcars2)) |>
  as_gt() |> tab_compact()
```
